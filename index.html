<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
    <link rel="stylesheet" href="css/style.css">

</head>

<body>
    <!-- 滑动模块的总容器 -->
    <div class="swiper-container con">
        <!-- 滑动页面的容器 -->
        <div class="swiper-wrapper">
            <!-- 第一个滑动页 -->
            <div class="swiper-slide slide1">
                <img class="bg1" src="img/bg1.jpg" alt="">
                <div class="p1 logo">
                    <img src="img/logo.png" alt="">
                </div>
                <div class="p2 ani" swiper-animate-effect="slideInUp" swiper-animate-duration="0.8s"
                    swiper-animate-delay="0s">
                    <img src="img/page_2_1.png" alt="">
                </div>
                <div class="p3 ani" swiper-animate-effect="flash" swiper-animate-duration="0.8s" swiper-animate-delay="0s">
                    <img src="img/page_2.png" alt="">
                </div>

                <div class="p4 ani" swiper-animate-effect="slideInRight" swiper-animate-duration="0.8s"
                    swiper-animate-delay="0">
                    <img src="img/page_2_2.png" alt="">
                </div>
                <div class="p5">
                    <img src="img/arrow.png" alt="">
                </div>
            </div>
            <!-- 第二个滑动页 -->
            <div class="swiper-slide slide2">
                <img class="bg1" src="img/bg.jpg" alt="">
                <div class="p1 logo">
                    <img src="img/logo.png" alt="">
                </div>
                <div class="p2 ani" swiper-animate-effect="slideInLeft" swiper-animate-duration="0.8s"
                    swiper-animate-delay="0s">
                    <img src="img/min_miss.png" alt="">
                </div>
                <div class="p3 ani" swiper-animate-effect="slideInRight" swiper-animate-duration="0.8s"
                    swiper-animate-delay="0s">
                    <img src="img/page_3_1.png" alt="">
                </div>

                <div class="p4">
                    <video width="100%" height="100%" poster="img/page_3_5.png">
                        <source src="source/video1.mp4" type="video/mp4">
                        您的浏览器不支持 video 标签。
                    </video>
                </div>
                <div class="p5">
                    <img src="img/arrow.png" alt="">
                </div>
                <div class="p6">
                    <img src="img/page_3_3.png" alt="">
                </div>
            </div>
            <!-- 第三个滑动页 -->
            <div class="swiper-slide slide3">
                <img class="bg1" src="img/bg1.jpg" alt="">
                <div class="p1 logo">
                    <img src="img/logo.png" alt="">
                </div>
                <div class="p2 ani" swiper-animate-effect="slideInLeft" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/min_miss.png" alt="">
                </div>
                <div class="p3 ani" swiper-animate-effect="slideInRight" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/page_4_1.png" alt="">
                </div>

                <div class="p4" id="btn">
                    <img src="img/page_4_2.png" alt="">
                </div>
                <div class="p5">
                    <img src="img/active_detail.png" alt="">
                </div>
            </div>
            <!-- 第四个滑动页 -->
            <div class="swiper-slide slide4">
                <img class="bg1" src="img/bg3.jpg" alt="">
                <div class="p1 logo">
                    <img src="img/logo.png" alt="">
                </div>
                <div class="p2 ani" swiper-animate-effect="slideInLeft" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/min_miss.png" alt="">
                </div>
                <div class="p3 ani" swiper-animate-effect="slideInRight" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/page_6_1.png" alt="">
                </div>
                <div class="p4" id="btn1">
                    <img src="img/page_6_2.png" alt="">
                </div>
            </div>
            <!-- 第五个滑动页 -->
            <div class="swiper-slide slide5">
                <img class="bg1" src="img/bg4.jpg" alt="">
                <div class="p1 logo">
                    <img src="img/logo.png" alt="">
                </div>
                <div class="p2 ani" swiper-animate-effect="slideInLeft" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/min_miss.png" alt="">
                </div>
                <div class="p3 ani" swiper-animate-effect="slideInRight" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/page_7_1.png" alt="">
                </div>
                <div class="p4" id="btn2">
                    <img src="img/page_7_2.png" alt="">
                </div>
            </div>
            <!-- 第六个滑动页 -->
            <div class="swiper-slide slide6">
                <img class="bg1" src="img/bg1.jpg" alt="">
                <div class="p1 logo">
                    <img src="img/logo.png" alt="">
                </div>
                <div class="p2 ani" swiper-animate-effect="slideInLeft" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/min_miss.png" alt="">
                </div>
                <div class="p3 ani" swiper-animate-effect="slideInRight" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/page_8_1.png" alt="">
                </div>
                <div class="p4 ani" swiper-animate-effect="zoomIn" swiper-animate-duration="0.5s" swiper-animate-delay="0s">
                    <img src="img/page_8_2.png" alt="">
                </div>

                <div class="p5" id="btn3">
                    <img src="img/page_6_3.png" alt="">
                </div>
            </div>
            <!-- 第七个滑动页 -->
            <div class="swiper-slide slide7">
                <img class="bg1" src="img/bg1.jpg" alt="">
                <div class="p1 logo">
                    <img src="img/logo.png" alt="">
                </div>
                <div class="p2 ani" swiper-animate-effect="slideInLeft" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/min_miss.png" alt="">
                </div>
                <div class="p3">
                    <img src="img/shadow.png" alt="">
                </div>
                <div class="p4 turnplate ">
                    <img class="item" id="wheelcanvas" src="img/turnplate.png" style="transform: rotate(180deg)" alt="">
                </div>

                <div class="p5 pointer">
                    <img src="img/start.png" alt="">
                </div>

                <div class="p6">
                    <img src="img/turnplate-pointer.png" alt="">
                </div>
            </div>
            <!-- 第八个滑动页 -->
            <div class="swiper-slide slide8">
                <img class="bg1" src="img/bg1.jpg" alt="">
                <div class="p1 logo">
                    <img src="img/logo.png" alt="">
                </div>
                <div class="p2 ani" swiper-animate-effect="slideInLeft" swiper-animate-duration="0.5s"
                    swiper-animate-delay="0s">
                    <img src="img/min_miss.png" alt="">
                </div>
                <div class="p3">
                    <img src="img/page_5_1.png" alt="">
                </div>
                <div class="p4" id="btn4">
                    <img src=" img/page_5_2.png" alt="">
                </div>

            </div>
        </div>
    </div>
    <script src="js/swiper.min.js"></script>
    <script src="js/swiper.animate.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/awardRotate.js"></script>
    <script>

        var mySwiper = new Swiper('.swiper-container', {
            direction: 'vertical',
            speed: 1000,
            onInit: function (swiper) { //Swiper2.x的初始化是onFirstInit
                swiperAnimateCache(swiper); //隐藏动画元素 
                swiperAnimate(swiper); //初始化完成开始动画
            },

            onSliderMove: function (swiper) {
                if (swiper.activeIndex != 2) {
                    swiper.unlockSwipeToNext();
                }
            },
            onSlideChangeStart: function (swiper) {
                if (swiper.activeIndex == 2) {
                    swiper.lockSwipeToNext();
                    console.log("锁定");
                }
            },
            onSlideChangeEnd: function (swiper) {
                swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
            }
        })
        // 点击播放视频
        $("video").addClass('pause');
        $('video').click(function () {
            if ($(this).hasClass('pause')) {
                $(this).attr('controls','controls');
                $("video").trigger("play");
                $(this).removeClass('pause');
                $(this).addClass('play');
            } else {
                $("video").trigger("pause");
                $(this).removeClass('play');               
                $(this).addClass('pause');
            }
        })
        // 点击跳转页面
        $('#btn').click(function () {
            mySwiper.unlockSwipeToNext();
            mySwiper.slideTo(3);//切换到第四个slide，速度为1秒
        })
        $('#btn1').click(function () {
            mySwiper.slideTo(4, 1000, true);//切换到第四个slide，速度为1秒
        })
        $('#btn2').click(function () {
            mySwiper.slideTo(5, 1000, true);//切换到第四个slide，速度为1秒
        })
        $('#btn3').click(function () {
            mySwiper.slideTo(6, 1000, true);//切换到第四个slide，速度为1秒
        })
        $('#btn4').click(function () {
            mySwiper.slideTo(2, 500, true);//切换到第三个slide，速度为1秒
        })
        // 转盘抽奖功能
        var turnplate = {
            restaraunts: [],
            startAngle: 0,				//开始角度
            bRotate: false				//false:停止;ture:旋转
        };
        turnplate.restaraunts = ["谢谢", "谢谢", "三等奖", "谢谢", "二等奖", "谢谢", "谢谢", "二等奖", "三等奖", "谢谢", "三等奖", "一等奖"]
        $('.pointer').click(function () {
            if (turnplate.bRotate) return;
            turnplate.bRotate = !turnplate.bRotate;
            //获取随机数(奖品个数范围内)
            var item = Math.floor(Math.random() * (12 - 1 + 1) + 1);
            //奖品数量等于10,指针落在对应奖品区域的中心角度[252, 216, 180, 144, 108, 72, 36, 360, 324, 288]
            rotateFn(item, turnplate.restaraunts[item - 1]);
            console.log(item);
        });
        var rotateTimeOut = function () {
            $('#wheelcanvas').rotate({
                angle: 0,
                animateTo: 2160,
                duration: 8000,
                callback: function () {
                    alert('网络超时，请检查您的网络设置！');
                }
            });
        };
        //旋转转盘 item:奖品位置; txt：提示语;
        var rotateFn = function (item, txt) {
            var angles = item * (360 / 12) - (360 / (12 * 2));
            if (angles < 270) {
                angles = 270 - angles;
            } else {
                angles = 360 - angles + 270;
            }
            $('#wheelcanvas').stopRotate();
            $('#wheelcanvas').rotate({
                angle: 0,
                animateTo: angles + 1800,
                duration: 8000,
                callback: function () {
                    alert(txt);
                    turnplate.bRotate = !turnplate.bRotate;
                    if(txt != '谢谢参与'){
                        mySwiper.slideNext();
                    }
                }
            });
        };

    </script>
</body>

</html>